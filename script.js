document.addEventListener('DOMContentLoaded', function() {
    const angleInput = document.getElementById('angle'); /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ —É–≥–ª–∞ */
    const startButton = document.getElementById('startButton'); /* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ */
    const stopButton = document.getElementById('stopButton'); /* –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ */
    const promptLabel = document.getElementById('prompt'); /* –ú–µ—Ç–∫–∞ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π */
    const printInitialAngle = document.getElementById('print_initial_angle'); /* –ú–µ—Ç–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —É–≥–ª–∞ */
    const printFinalAngle = document.getElementById('print_final_angle'); /* –ú–µ—Ç–∫–∞ –∫–æ–Ω–µ—á–Ω–æ–≥–æ —É–≥–ª–∞ */
    const printPeriod = document.getElementById('print_period'); /* –ú–µ—Ç–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π */
    const printEnergy = document.getElementById('print_energy'); /* –ú–µ—Ç–∫–∞ –ø–æ–ª–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏ */
    const printCycle = document.getElementById('print_cycle'); /* –ú–µ—Ç–∫–∞ –Ω–æ–º–µ—Ä–∞ —Ü–∏–∫–ª–∞ */
    const cycleCount = document.getElementById('cycleCount'); /* –°—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ */
    const activePendulum = document.getElementById('activePendulum'); /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */

    const pendulum1 = document.getElementById('pendulum1'); /* –ü–µ—Ä–≤—ã–π –º–∞—è—Ç–Ω–∏–∫ */
    const pendulum2 = document.getElementById('pendulum2'); /* –í—Ç–æ—Ä–æ–π –º–∞—è—Ç–Ω–∏–∫ */
    const weight1 = document.getElementById('weight1'); /* –ì—Ä—É–∑ –ø–µ—Ä–≤–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
    const weight2 = document.getElementById('weight2'); /* –ì—Ä—É–∑ –≤—Ç–æ—Ä–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */

    // –§–∏–∑–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    const g = 9.81; // —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è, –º/—Å¬≤
    const L = 1.0; // –¥–ª–∏–Ω–∞ –º–∞—è—Ç–Ω–∏–∫–∞, –º
    const m = 1.0; // –º–∞—Å—Å–∞ —à–∞—Ä–∞, –∫–≥

    let isAnimating = false; /* –§–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (true - –∏–¥–µ—Ç, false - –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞) */
    let currentCycle = 0; /* –¢–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä —Ü–∏–∫–ª–∞ (–æ—Ç 0 –¥–æ 5) */
    const totalCycles = 5; /* –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è */
    let initialAngle = 0; /* –ù–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö */
    let currentAngle = 0; /* –¢–µ–∫—É—â–∏–π —É–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö */

     // –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê –ü–ï–†–ò–û–î–ê –ö–û–õ–ï–ë–ê–ù–ò–ô
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —É–≥–ª–∞
    function calculatePeriod(angleDeg) {
      const angleRad = angleDeg * Math.PI / 180; /* –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–¥—É—Å–æ–≤ –≤ —Ä–∞–¥–∏–∞–Ω—ã */
      const T0 = 2 * Math.PI * Math.sqrt(L / g); /* –§–æ—Ä–º—É–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è –º–∞–ª—ã—Ö —É–≥–ª–æ–≤: T = 2œÄ‚àö(L/g) */

      // –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ –±–æ–ª—å—à–∏–µ —É–≥–ª—ã
      if (angleDeg <= 15) {
        return T0; /* –î–ª—è –º–∞–ª—ã—Ö —É–≥–ª–æ–≤ –ø–æ–ø—Ä–∞–≤–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞ */
      } else {
        // –ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —É–≥–ª–æ–≤
        const K = Math.sin(angleRad / 2); /* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è */
        return T0 * (1 + K*K/4 + 9*K*K*K*K/64); /* –†–∞–∑–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä—è–¥ —Å —É—á–µ—Ç–æ–º –Ω–µ–ª–∏–Ω–µ–π–Ω–æ—Å—Ç–∏ */
      }
    }

    // –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê –ü–û–õ–ù–û–ô –≠–ù–ï–†–ì–ò–ò
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –≤ –¥–∂–æ—É–ª—è—Ö –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —É–≥–ª–∞
    function calculateEnergy(angleDeg) {
      const angleRad = angleDeg * Math.PI / 180; /* –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–¥—É—Å–æ–≤ –≤ —Ä–∞–¥–∏–∞–Ω—ã */
      const h = L * (1 - Math.cos(angleRad)); /* –í—ã—Å–æ—Ç–∞ –ø–æ–¥—ä–µ–º–∞ –≥—Ä—É–∑–∞: h = L(1 - cosŒ∏) */
      return m * g * h; /* –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: E = mgh */
    }

    // –≠–§–§–ï–ö–¢ –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–Ø
    // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —à–∞—Ä–æ–≤ –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏
    function showCollision() {
      weight1.classList.add('collision'); /* –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–≤–æ–º—É —à–∞—Ä—É */
      weight2.classList.add('collision'); /* –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Ç–æ—Ä–æ–º—É —à–∞—Ä—É */
      setTimeout(() => { /* –ß–µ—Ä–µ–∑ 300ms —É–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ */
        weight1.classList.remove('collision');
        weight2.classList.remove('collision');
      }, 300);
    }

    // –ü–õ–ê–í–ù–û–ï –î–í–ò–ñ–ï–ù–ò–ï –ú–ê–Ø–¢–ù–ò–ö–ê
    // –ê–Ω–∏–º–∏—Ä—É–µ—Ç –≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—è—Ç–Ω–∏–∫–∞ –∫ –∑–∞–¥–∞–Ω–Ω–æ–º—É —É–≥–ª—É
    function animatePendulum(pendulum, targetAngle, duration) {
      return new Promise(resolve => { /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º Promise –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è */
        pendulum.style.transition = `transform ${duration}ms cubic-bezier(0.4, 0, 0.2, 1)`; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS transition */
        setTimeout(() => { /* –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∞–Ω–∏–º–∞—Ü–∏–∏ */
          pendulum.style.transform = `rotate(${targetAngle}deg)`; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª */
        }, 10);

        setTimeout(() => { /* –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ */
          pendulum.style.transition = ''; /* –£–±–∏—Ä–∞–µ–º transition */
          resolve(); /* –†–∞–∑—Ä–µ—à–∞–µ–º Promise */
        }, duration + 10);
      });
    }

    // –û–î–ò–ù –ü–û–õ–ù–´–ô –¶–ò–ö–õ –ü–ï–†–ï–î–ê–ß–ò –≠–ù–ï–†–ì–ò–ò
    // –í—ã–ø–æ–ª–Ω—è–µ—Ç: 1‚Üí—Ü–µ–Ω—Ç—Ä‚Üí2‚Üí—Ü–µ–Ω—Ç—Ä‚Üí1
    async function runCollisionCycle(cycleNum, angle) {
      console.log(`–¶–∏–∫–ª ${cycleNum}, —É–≥–æ–ª: ${angle.toFixed(1)}¬∞`); /* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å */

      // –û–ë–ù–û–í–õ–ï–ù–ò–ï UI
      currentCycle = cycleNum; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä —Ü–∏–∫–ª–∞ */
      cycleCount.textContent = cycleNum; /* –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤ –ø–∞–Ω–µ–ª–∏ */
      printCycle.textContent = `–¶–∏–∫–ª: ${cycleNum}/${totalCycles}`; /* –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∫—É —Ü–∏–∫–ª–∞ */
      printFinalAngle.textContent = `–ö–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª: ${angle.toFixed(1)}¬∞`; /* –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª */

      // 1. –ü–ï–†–í–´–ô –ú–ê–Ø–¢–ù–ò–ö –î–í–ò–ñ–ï–¢–°–Ø –ö –¶–ï–ù–¢–†–£
      printPeriod.textContent = `–ü–µ—Ä–∏–æ–¥ –∫–æ–ª–µ–±–∞–Ω–∏–π: ${calculatePeriod(angle).toFixed(2)} —Å`; /* –†–∞—Å—á–µ—Ç –ø–µ—Ä–∏–æ–¥–∞ */
      printEnergy.textContent = `–ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: ${calculateEnergy(angle).toFixed(2)} –î–∂`; /* –†–∞—Å—á–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏ */
      activePendulum.textContent = 'üî¥'; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –∞–∫—Ç–∏–≤–µ–Ω –∫—Ä–∞—Å–Ω—ã–π –º–∞—è—Ç–Ω–∏–∫ */

      await animatePendulum(pendulum1, 0, 1000); /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∫ —Ü–µ–Ω—Ç—Ä—É (1000ms) */

      // –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–ï 1
      showCollision(); /* –≠—Ñ—Ñ–µ–∫—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è */
      await new Promise(resolve => setTimeout(resolve, 300)); /* –ü–∞—É–∑–∞ 300ms */

      // 2. –í–¢–û–†–û–ô –ú–ê–Ø–¢–ù–ò–ö –î–í–ò–ñ–ï–¢–°–Ø –û–¢ –¶–ï–ù–¢–†–ê
      activePendulum.textContent = 'üîµ'; /* –¢–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–µ–Ω —Å–∏–Ω–∏–π –º–∞—è—Ç–Ω–∏–∫ */
      await animatePendulum(pendulum2, -angle, 1000); /* –î–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π —É–≥–æ–ª) */

      // 3. –í–¢–û–†–û–ô –ú–ê–Ø–¢–ù–ò–ö –í–û–ó–í–†–ê–©–ê–ï–¢–°–Ø –ö –¶–ï–ù–¢–†–£
      activePendulum.textContent = 'üîµ'; /* –°–∏–Ω–∏–π –º–∞—è—Ç–Ω–∏–∫ –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–µ–Ω */
      await animatePendulum(pendulum2, 0, 1000); /* –í–æ–∑–≤—Ä–∞—Ç –∫ —Ü–µ–Ω—Ç—Ä—É */

      // –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–ï 2
      showCollision(); /* –í—Ç–æ—Ä–æ–π —ç—Ñ—Ñ–µ–∫—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è */
      await new Promise(resolve => setTimeout(resolve, 300)); /* –ü–∞—É–∑–∞ 300ms */

      // 4. –ü–ï–†–í–´–ô –ú–ê–Ø–¢–ù–ò–ö –í–û–ó–í–†–ê–©–ê–ï–¢–°–Ø –ù–ê –ú–ï–°–¢–û
      activePendulum.textContent = 'üî¥'; /* –°–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–µ–Ω –∫—Ä–∞—Å–Ω—ã–π –º–∞—è—Ç–Ω–∏–∫ */
      await animatePendulum(pendulum1, angle, 1000); /* –í–æ–∑–≤—Ä–∞—Ç –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ */

      console.log(`–¶–∏–∫–ª ${cycleNum} –∑–∞–≤–µ—Ä—à–µ–Ω`); /* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ */
    }

    // –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ê–ù–ò–ú–ê–¶–ò–ò
    // –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö 5 —Ü–∏–∫–ª–æ–≤
    async function startAnimation() {
      if (isAnimating) return; /* –ï—Å–ª–∏ –∞–Ω–∏–º–∞—Ü–∏—è —É–∂–µ –∏–¥–µ—Ç, –≤—ã—Ö–æ–¥–∏–º */

      const inputAngle = parseFloat(angleInput.value); /* –ü–æ–ª—É—á–∞–µ–º —É–≥–æ–ª –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞ */

      // –ü–†–û–í–ï–†–ö–ê –í–í–û–î–ê
      if (isNaN(inputAngle) || inputAngle < 10 || inputAngle > 60) {
        promptLabel.textContent = '–í–≤–µ–¥–∏—Ç–µ —É–≥–æ–ª –æ—Ç 10¬∞ –¥–æ 60¬∞'; /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */
        promptLabel.style.color = '#e74c3c'; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –æ—à–∏–±–∫–∏ */
        return; /* –ü—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ */
      }

      // –ù–ê–ß–ê–õ–û –ê–ù–ò–ú–ê–¶–ò–ò
      isAnimating = true; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –∞–Ω–∏–º–∞—Ü–∏–∏ */
      initialAngle = inputAngle; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª */
      currentAngle = inputAngle; /* –¢–µ–∫—É—â–∏–π —É–≥–æ–ª —Ä–∞–≤–µ–Ω –Ω–∞—á–∞–ª—å–Ω–æ–º—É */

      // –û–ë–ù–û–í–õ–ï–ù–ò–ï –†–ê–°–ß–ï–¢–û–í
      printInitialAngle.textContent = `–ù–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª: ${initialAngle}¬∞`;
      printFinalAngle.textContent = `–ö–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª: ${initialAngle}¬∞`;
      printPeriod.textContent = `–ü–µ—Ä–∏–æ–¥ –∫–æ–ª–µ–±–∞–Ω–∏–π: ${calculatePeriod(initialAngle).toFixed(2)} —Å`;
      printEnergy.textContent = `–ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: ${calculateEnergy(initialAngle).toFixed(2)} –î–∂`;
      printCycle.textContent = `–¶–∏–∫–ª: 0/${totalCycles}`;

      promptLabel.textContent = '–ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞—Å—å...'; /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ */
      promptLabel.style.color = '#3498db'; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è */

      // –°–ë–†–û–° –ü–û–ó–ò–¶–ò–ô –ú–ê–Ø–¢–ù–ò–ö–û–í
      pendulum1.style.transform = `rotate(${initialAngle}deg)`; /* –ü–µ—Ä–≤—ã–π –º–∞—è—Ç–Ω–∏–∫ –≤ –Ω–∞—á–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ */
      pendulum2.style.transform = `rotate(0deg)`; /* –í—Ç–æ—Ä–æ–π –º–∞—è—Ç–Ω–∏–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ */
      pendulum1.style.transition = ''; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º transition */
      pendulum2.style.transition = ''; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º transition */

      await new Promise(resolve => setTimeout(resolve, 500)); /* –ü–∞—É–∑–∞ 500ms –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º */

      // –í–´–ü–û–õ–ù–ï–ù–ò–ï 5 –¶–ò–ö–õ–û–í
      try {
        for (let i = 1; i <= totalCycles; i++) { /* –¶–∏–∫–ª –æ—Ç 1 –¥–æ 5 */
          if (!isAnimating) break; /* –ï—Å–ª–∏ –∞–Ω–∏–º–∞—Ü–∏—é –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏, –ø—Ä–µ—Ä—ã–≤–∞–µ–º —Ü–∏–∫–ª */

          // –í–´–ß–ò–°–õ–ï–ù–ò–ï –£–ì–õ–ê –î–õ–Ø –¢–ï–ö–£–©–ï–ì–û –¶–ò–ö–õ–ê
          const cycleAngle = initialAngle * Math.pow(0.85, i - 1); /* –£–º–µ–Ω—å—à–µ–Ω–∏–µ —É–≥–ª–∞ –Ω–∞ 15% –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª */
          currentAngle = cycleAngle; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —É–≥–æ–ª */

          await runCollisionCycle(i, cycleAngle); /* –í—ã–ø–æ–ª–Ω—è–µ–º —Ü–∏–∫–ª */

          // –ü–ê–£–ó–ê –ú–ï–ñ–î–£ –¶–ò–ö–õ–ê–ú–ò (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ)
          if (i < totalCycles && isAnimating) { /* –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ª–∏ —Ü–∏–∫–ª –∏ –∏–¥–µ—Ç –ª–∏ –∞–Ω–∏–º–∞—Ü–∏—è */
            await new Promise(resolve => setTimeout(resolve, 300)); /* –ñ–¥–µ–º 300ms –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ü–∏–∫–ª–æ–º */
          }
        }

        if (isAnimating) { /* –ï—Å–ª–∏ –∞–Ω–∏–º–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ */
          // –ó–ê–í–ï–†–®–ï–ù–ò–ï –ê–ù–ò–ú–ê–¶–ò–ò
          promptLabel.textContent = '–ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! 5 —Ü–∏–∫–ª–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'; /* –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ */
          promptLabel.style.color = '#2ecc71'; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è */
          activePendulum.textContent = '-'; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */

          // –ü–õ–ê–í–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê –í –¶–ï–ù–¢–†–ï
          await animatePendulum(pendulum1, 0, 1000); /* –ü–ª–∞–≤–Ω–æ —Å—Ç–∞–≤–∏–º –ø–µ—Ä–≤—ã–π –º–∞—è—Ç–Ω–∏–∫ –≤ —Ü–µ–Ω—Ç—Ä */
          await animatePendulum(pendulum2, 0, 1000); /* –ü–ª–∞–≤–Ω–æ —Å—Ç–∞–≤–∏–º –≤—Ç–æ—Ä–æ–π –º–∞—è—Ç–Ω–∏–∫ –≤ —Ü–µ–Ω—Ç—Ä */
        }

      } catch (error) { /* –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫ */
        console.error('–û—à–∏–±–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏:', error); /* –í—ã–≤–æ–¥ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ */
        promptLabel.textContent = '–û—à–∏–±–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏'; /* –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é */
        promptLabel.style.color = '#e74c3c'; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –æ—à–∏–±–∫–∏ */
      } finally { /* –≠—Ç–æ—Ç –±–ª–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏ */
        isAnimating = false; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –∞–Ω–∏–º–∞—Ü–∏–∏ */
      }
    }

    // –§–£–ù–ö–¶–ò–Ø –û–°–¢–ê–ù–û–í–ö–ò –ê–ù–ò–ú–ê–¶–ò–ò
    // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    function stopAnimation() {
      isAnimating = false; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –≤ false - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é */

      // –û–°–¢–ê–ù–û–í–ö–ê –ê–ù–ò–ú–ê–¶–ò–ô
      pendulum1.style.transition = 'transform 0.5s ease-out'; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
      pendulum2.style.transition = 'transform 0.5s ease-out'; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
      pendulum1.style.transform = 'rotate(0deg)'; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–≥–æ–ª –ø–µ—Ä–≤–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
      pendulum2.style.transform = 'rotate(0deg)'; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–≥–æ–ª –≤—Ç–æ—Ä–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */

      setTimeout(() => { /* –ß–µ—Ä–µ–∑ 500ms –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ */
        pendulum1.style.transition = ''; /* –£–±–∏—Ä–∞–µ–º transition —É –ø–µ—Ä–≤–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
        pendulum2.style.transition = ''; /* –£–±–∏—Ä–∞–µ–º transition —É –≤—Ç–æ—Ä–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
      }, 500);

      promptLabel.textContent = '–ê–Ω–∏–º–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞'; /* –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é */
      promptLabel.style.color = '#e74c3c'; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–µ */
      activePendulum.textContent = '-'; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
      cycleCount.textContent = '-'; /* –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ */
    }

    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
    // –°–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    startButton.addEventListener('click', startAnimation); /* –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ù–∞—á–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é" –∑–∞–ø—É—Å–∫–∞–µ–º startAnimation() */

    stopButton.addEventListener('click', stopAnimation); /* –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –∑–∞–ø—É—Å–∫–∞–µ–º stopAnimation() */

    angleInput.addEventListener('keypress', function(e) { /* –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —É–≥–ª–∞ */
      if (e.key === 'Enter') { /* –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–ª–∞–≤–∏—à–∞ Enter */
        startAnimation(); /* –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É */
      }
    });

    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

    printInitialAngle.textContent = '–ù–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª: -'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —É–≥–ª–∞ */
    printFinalAngle.textContent = '–ö–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª: -'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ —É–≥–ª–∞ */
    printPeriod.textContent = '–ü–µ—Ä–∏–æ–¥ –∫–æ–ª–µ–±–∞–Ω–∏–π: -'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞ */
    printEnergy.textContent = '–ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è: -'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏ */
    printCycle.textContent = '–¶–∏–∫–ª: -/5'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ —Ü–∏–∫–ª–æ–≤ */
    cycleCount.textContent = '-'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏ */
    activePendulum.textContent = '-'; /* –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—è—Ç–Ω–∏–∫–∞ */
  }); /* –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ addEventListener */
